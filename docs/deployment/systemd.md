# systemd 部署

目前，较新的 Linux 发行版，都已经使用了 systemd 作为系统守护进程，负责系统各个服务进程的管理。我们可以使用 systemd 来守护我们的服务进程，实现自动重启等功能。

## 常用的目录安排

Linux 没有规定程序以及配置必须安装在哪个目录下，但为了管理方便，一般而言可以采用以下的存放路径：

### 可执行文件

全局的可执行文件一般安装在 `/usr/local` 下，其中可执行程序在 `/usr/local/bin` 下，而运行库等在 `/usr/local/lib` 下。一般这种程序是通过 `make install` 命令安装的。有一些只有一个可执行文件的命令行程序，也可以放在 `/usr/local/bin` 下。

对于已经提供了安装器的程序，例如 Matlab，则可以安装到 `/opt` 目录下，例如 Matlab 可以安装到 `/opt/matlab` 下，可执行文件一般会存放在 `/opt/xxx/bin/xxx` 中。

### 配置文件

配置文件一般有全局的配置文件，也有用户的配置文件。通常而言，全局配置文件由系统管理员管理，存放在 `/etc` 目录下。例如，`nginx` 程序的配置文件就存放在 `/etc/nginx` 目录下。而用户特定的配置文件，一般可以存放在 `~/.config` 目录下，或者 `~/.$APP` 目录下，例如，如果你写了一个服务器程序叫 `my-server`，可以将配置文件放到 `~/.my-server` 中。

不同的程序对于配置文件的搜索过程不一样，有的程序会内置若干个搜索路径，并按照优先级依次覆盖配置，有的程序必须手动指定一个配置文件路径，或者使用默认的配置文件路径启动。